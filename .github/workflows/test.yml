name: CI

on: [push]

jobs:
  test:
    runs-on: ubuntu-latest
    name: Test ConTeXt Github Action
    steps:
      - name: GitHub Checkout
        uses: actions/checkout@v2
      - name: Compile basic ConTeXt file
        uses: ./
        with:
          main-tex: test.tex
          working-directory: test/
      - name: Compile ConTeXt file with custom args
        uses: ./
        with:
          main-tex: test.tex
          args: "--result=custom-test"
          working-directory: test/

      - name: Upload test artifact
        uses: actions/upload-artifact@v2
        with:
          name: test
          path: |
            *.pdf
